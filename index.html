 

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>ENVRI Knowledge Base</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

<meta name="robots" content="index, nofollow">

<link rel="stylesheet" type="text/css" href="./css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="./css/jquery.dataTables.min.css">
<link rel="stylesheet" type="text/css" href="./css/scholia.css">
<!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"> 
</script> -->
<script src="./js/jquery.min.js">
</script>

<!-- Generated with RealFaviconGenerator -->

<style>
.button {
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    border: solid 1px #20538D;
    text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.4);
    -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.4), 0 1px 1px rgba(0, 0, 0, 0.2);
    -moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.4), 0 1px 1px rgba(0, 0, 0, 0.2);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.4), 0 1px 1px rgba(0, 0, 0, 0.2);
    background: #4479BA;
    color: #FFF;
    padding: 8px 12px;
    text-decoration: none;
}
</style>

  </head>
  <body>
    
<div class="navbar navbar-static-top">
    
</div>

<div class="container">
    
	<span id="aspect-chooser"> </span>
</div>


<div class="container">
    
	<h1 id="h1">FAIR Gap Analysis</h1>
</br>
	<div id="intro">Research Infrastructures and their repositories that do <em>not</em> meet the FAIR principles.</div>

		<div id="list-of-authors_wrapper" class="dataTables_wrapper no-footer">
			<div class="dataTables_length" id="list-of-authors_length">
			<!--	<label>
					Show <select name="list-of-authors_length" aria-controls="list-of-authors" class="">
						<option value="10"></option>
						<option value="25">25</option>
						<option value="100">100</option>
						<option value="-1">All</option>
					</select> entries
				</label> -->
			</div>
			
	<div id="list-of-authors_filter" class="dataTables_filter">
		<label>
		<!--	Search:<input type="search" class="" placeholder="" aria-controls="list-of-authors"> -->
		</label>
	</div>
	
		<!-- <div id="demonstrators"> -->
		</div>
		</br>
		
		<!-- <h2 id="h1">Gaps in Research Infrastructure Repositories</h2> -->
		
		<div id="RIgaps">
		</div>
		</br>
</div>

</div>

</body></html>


<script> 
	$(document).ready(function() {
	
		var query = [
			"prefix envri: <http://envri.eu/ns/>",
			"prefix dcterms: <http://purl.org/dc/terms/>",
			"prefix schema: <http://schema.org/>",
			"prefix skos: <http://www.w3.org/2004/02/skos/core#>",
			"prefix fair: <https://w3id.org/fair/principles/terms/>",
			"select distinct ?principle_label ?principle_definition ?fair_principle ?creator ?created ?demonstrator_url where {",
			"?fair_principle a fair:FAIR-SubPrinciple .",
			"?fair_principle skos:definition ?principle_definition .",
			"?fair_principle rdfs:label ?principle_label .",
			"?fair_principle envri:hasDemonstrator ?demonstrator .",
			"?demonstrator a envri:TechnologyDemonstrator .",
			"?demonstrator dcterms:creator ?creator .",
			"?demonstrator dcterms:created ?created .",
			"?demonstrator schema:url ?demonstrator_url .",
			"FILTER (lang(?principle_label) = 'en' && lang(?principle_definition) = 'en')",
			"}"
		].join(" ");
		
		data=fetchData(query);
		
		// var principleLinks=[];
		var demonstrators={};
		
			var tabledata = data["results"].bindings;	
			
			for(i=0; i<tabledata.length; i++) {
				var temp = tabledata[i];				
				var demonstrator = {};

				demonstrator["fair_principle"] = temp["fair_principle"].value;
				demonstrator["principle_label"] = temp["principle_label"].value;
				demonstrator["principle_definition"] = temp["principle_definition"].value;
				demonstrator["demonstrator_url"] = temp["demonstrator_url"].value;
				demonstrator["creator"] = temp["creator"].value;
				demonstrators[temp["principle_label"].value] = demonstrator;
			}
			
		principleI2(demonstrators["I2"]);
		principleR12(demonstrators["R1.2"]);
	}); 
	</script>
	
<script>
	function principleI2(demonstrator) {
	
		var query = [
			"prefix ns: <http://envri.eu/ns/>",
			"prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>",
			"prefix skos: <http://www.w3.org/2004/02/skos/core#>",
			"select ?infrastructure ?repository",
			"where {",
			"[] a ns:FAIRAssessment ;",
			"ns:infrastructure [ skos:prefLabel ?infrastructure ] ;",
			"ns:hasRepository [", 
			"rdfs:label ?repository ;",
			"ns:hasMetadata [ ns:categoriesAreDefinedInRegistries ?value ]",
			"] .",
			"FILTER (?value = ns:planned || ?value = 'false'^^xsd:bool) }",
		].join(" ");
		
		data=fetchData(query);
		displayPrincipleData(data, demonstrator);
		
	}

	function principleR12(demonstrator) {
	
		var query = [
			"prefix ns: <http://envri.eu/ns/>",
			"prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>",
			"prefix skos: <http://www.w3.org/2004/02/skos/core#>",
			"select ?infrastructure ?repository",
			"where {",
			"[] a ns:FAIRAssessment ;",
			"ns:infrastructure [ skos:prefLabel ?infrastructure ] ;",
			"ns:hasRepository [", 
			"rdfs:label ?repository ;",
			"ns:hasMetadata [ ns:hasMachineReadableProvenance 'false'^^xsd:bool ]",
			"] .",
			"}",
		].join(" ");
		
		data=fetchData(query);
		
		displayPrincipleData(data, demonstrator);	
			
	}
	
	function displayPrincipleData(data, demonstrator) {
		var str = '<br/>';
			str += '<p>';
			str += '<div style="width: 100%; overflow: hidden;">';
			str += '<div style="width: 800px; float: left;">';
	 		str += '<h3><a href='+demonstrator["fair_principle"]+' target="_blank">'+demonstrator["principle_label"]+'</a>: '+demonstrator["principle_definition"]+'</h3>';
			str += '</div>';
			str += '<div style="padding-top: 10px; text-align: right;">'
			str += '<a href='+demonstrator["demonstrator_url"]+' target="_blank" class="button">'+"Demonstrator"+'</a>'
			str += '</div>';
			str += '</div>';
			str += '</p>';

			str += '<table class="table table-hover dataTable no-footer" id="list-demonstrators" role="grid" aria-describedby="list-of-authors_info" style="width: 1110px;">';
			str+='<thead><tr>';
			str += '<th> Infrastructure </th>';
			str += '<th> Repositories </th>';
			
			str += '</tr></thead>';
		
			var tabledata = data["results"].bindings;
			
			var infList = [];
			var repoList = [];
			var count=0;
			for(i=0; i<tabledata.length; i++) {
				var temp = tabledata[i];
				
				if(infList.indexOf(temp["infrastructure"].value)<0) {
					infList[count] = temp["infrastructure"].value;
					repoList[count] = temp["repository"].value;
					count++;
				}
				else {
					repoList[infList.indexOf(temp["infrastructure"].value)] += "; "+temp["repository"].value;
				}
			}
			
			str += '<tbody>';
			for(i=0; i<infList.length; i++) {
				str += '<tr>';
				str += '<td>'+infList[i]+'</td>';
				str += '<td>'+repoList[i]+'</td>';
				str += '</tr>';
			}
		
			str += '</tbody></table>';
		    $('#RIgaps').append(str);
	}
	
	function fetchData(query) {
		var url = "https://envrifair1.test.fedcloud.eu/sparql";
		var queryUrl = url+"?query="+ encodeURIComponent(query) +"&format=json";
		var result;
			$.ajax({
			url: queryUrl,
			type: 'GET',
			async: false,
	
		success: function(data) {
			result=data;
			},
			error: function(e)
			{
			   alert("fail"+e.message);
			}
		});
		return result;
	}
</script>

